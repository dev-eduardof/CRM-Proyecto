<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estructura Técnica CRM - Sistema de Gestión de Talleres</title>
    <style>
        @media print {
            @page {
                size: A4;
                margin: 2cm;
            }
            body {
                font-size: 10pt;
            }
            h1, h2, h3 {
                page-break-after: avoid;
            }
            table {
                page-break-inside: avoid;
            }
        }
        body {
            font-family: 'Segoe UI', Arial, 'Helvetica Neue', sans-serif;
            font-size: 11pt;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
            background: #fff;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
            margin-top: 30px;
            font-size: 24pt;
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 10px;
            margin-top: 30px;
            font-size: 18pt;
        }
        h3 {
            color: #555;
            margin-top: 20px;
            font-size: 14pt;
        }
        h4 {
            color: #666;
            margin-top: 15px;
            font-size: 12pt;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 10pt;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 10pt;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 20px;
            margin-left: 0;
            color: #555;
            font-style: italic;
            background-color: #f8f9fa;
            padding: 10px 20px;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 40px;
        }
        li {
            margin: 8px 0;
        }
        hr {
            border: none;
            border-top: 2px solid #ecf0f1;
            margin: 40px 0;
        }
        .page-break {
            page-break-before: always;
        }
        strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>

<h1>ESTRUCTURA TÉCNICA DEL PROYECTO CRM</h1>
<h2>Sistema de Gestión de Talleres</h2>

<hr />

<h2>1. OBJETIVOS DEL PROYECTO</h2>

<ul>
<li>Digitalizar completamente el proceso de recepción de trabajos</li>
<li>Permitir seguimiento en tiempo real del estado de cada orden de trabajo</li>
<li>Controlar pagos, anticipos y gastos del negocio</li>
<li>Generar reportes detallados y análisis de utilidades</li>
<li>Facilitar la comunicación con clientes mediante notificaciones automáticas</li>
</ul>

<hr />

<h2>2. ANÁLISIS DE NECESIDADES</h2>

<h3>2.1 Módulos Identificados</h3>

<h4>Módulo 1: Recepción (Tablet/Teléfono)</h4>
<ul>
<li>Gestión de permisos (crear, editar, solicitar eliminación)</li>
<li>Captura de información del trabajo</li>
<li>Gestión de clientes (existentes y nuevos)</li>
<li>Sistema de prioridades y fechas promesa</li>
<li>Categorización de trabajos</li>
<li>Asignación a técnicos</li>
<li>Generación de folio OT</li>
</ul>

<h4>Módulo 2: Impresión de Tickets</h4>
<ul>
<li>Ticket con información completa</li>
<li>Logo y datos del negocio</li>
<li>Información de anticipos</li>
</ul>

<h4>Módulo 3: Panel de Técnicos</h4>
<ul>
<li>Vista de tareas asignadas</li>
<li>Control de estatus de trabajos</li>
<li>Registro de materiales utilizados</li>
<li>Gestión de OTIs y operaciones</li>
<li>Subtareas</li>
</ul>

<h4>Módulo 4: Recepción Post-Trabajo</h4>
<ul>
<li>Revisión de trabajos terminados</li>
<li>Creación de borrador con precios</li>
<li>Aprobación administrativa</li>
<li>Notificación a clientes (WhatsApp/Email)</li>
</ul>

<h4>Módulo 5: Caja</h4>
<ul>
<li>Registro de pagos</li>
<li>Control de anticipos</li>
<li>Cortes de caja</li>
<li>Gestión de gastos</li>
</ul>

<h4>Módulo 6: Auxiliar Administrativo</h4>
<ul>
<li>Panel de ingresos/egresos</li>
<li>Gestión de cuentas por cobrar/pagar</li>
</ul>

<h4>Módulo 7: Reportes</h4>
<ul>
<li>Trabajos entrantes/salientes</li>
<li>Pagados/entregados</li>
<li>Movimientos de caja</li>
<li>Filtros avanzados</li>
<li>Cálculo de comisiones</li>
</ul>

<h4>Módulo 8: Administración</h4>
<ul>
<li>Gestión de usuarios y roles</li>
<li>Reportes ejecutivos</li>
<li>Monitoreo de operaciones</li>
<li>Configuración del sistema</li>
</ul>

<hr />

<h2>3. ARQUITECTURA TÉCNICA</h2>

<h3>3.1 Stack Tecnológico</h3>

<h4>Frontend</h4>
<ul>
<li><strong>React.js</strong> (aplicación web responsive para tablet/teléfono y escritorio)</li>
<li><strong>React Router</strong> para navegación</li>
<li><strong>Material-UI</strong> o <strong>Ant Design</strong> para componentes UI</li>
<li>Diseño responsive y moderno (funciona en tablets, teléfonos y escritorio)</li>
<li><strong>React-PDF</strong> para generación de tickets y reportes</li>
</ul>

<h4>Backend</h4>
<ul>
<li><strong>Python 3.9+</strong> con <strong>FastAPI</strong></li>
<li>API RESTful</li>
<li>Autenticación JWT (JSON Web Tokens)</li>
<li><strong>SQLAlchemy</strong> como ORM</li>
<li><strong>Pydantic</strong> para validación de datos</li>
</ul>

<h4>Base de Datos</h4>
<ul>
<li><strong>MariaDB</strong> (base de datos relacional SQL)</li>
<li>Relaciones normalizadas</li>
<li>Migraciones con <strong>Alembic</strong></li>
</ul>

<h4>Servicios Adicionales</h4>
<ul>
<li><strong>Almacenamiento de imágenes</strong>: Sistema de archivos local (carpeta <code>uploads/</code>)</li>
<li><strong>Notificaciones push</strong>: Firebase Cloud Messaging</li>
<li><strong>WhatsApp</strong>: API Externa (Twilio API, WhatsApp Business API, o similar)
  <ul>
    <li>Notificación automática a clientes cuando el trabajo está terminado</li>
    <li>Integración mediante API REST externa</li>
    <li>Envío de mensajes con detalles del trabajo y precio final</li>
  </ul>
</li>
<li><strong>Email</strong>: SMTP local o servicio como SendGrid</li>
<li><strong>Generación de PDFs</strong>: <strong>ReportLab</strong> o <strong>WeasyPrint</strong> (Python)</li>
<li><strong>Impresión</strong>: Integración con impresoras térmicas vía API</li>
</ul>

<h3>3.2 Infraestructura</h3>

<h4>Servidor Local</h4>
<ul>
<li><strong>Base de datos local</strong> (MariaDB en servidor local)</li>
<li><strong>Almacenamiento local</strong> (carpeta de archivos en servidor: <code>uploads/</code>)</li>
<li><strong>Servidor de desarrollo</strong>: FastAPI con Uvicorn</li>
<li><strong>Frontend</strong>: React con Vite o Create React App</li>
</ul>

<h4>Requisitos del Servidor Local</h4>

<strong>Hardware Mínimo Recomendado:</strong>
<ul>
<li>CPU: 4 núcleos</li>
<li>RAM: 8 GB</li>
<li>Disco: 100 GB (para base de datos y archivos)</li>
<li>Conexión: Red local estable</li>
</ul>

<strong>Software Requerido:</strong>
<ul>
<li>Python 3.9 o superior</li>
<li>Node.js 18+ y npm</li>
<li>MariaDB 10.6+
  <ul>
    <li>Compatible con MySQL</li>
    <li>Soporta relaciones complejas y transacciones ACID</li>
    <li>Ideal para servidor local</li>
  </ul>
</li>
<li>Git para control de versiones</li>
</ul>

<h4>Fase de Producción</h4>
<ul>
<li>Migración a servidor dedicado o VPS</li>
<li>Backup automático diario</li>
<li>SSL/HTTPS (Let's Encrypt)</li>
<li>Monitoreo básico</li>
<li>Opcional: CDN para imágenes si se requiere escalabilidad</li>
</ul>

<hr />

<h2>4. ESTRUCTURA DE BASE DE DATOS</h2>

<h3>4.1 Sistema de Base de Datos</h3>

<p><strong>MariaDB</strong> será utilizado como sistema de gestión de base de datos relacional SQL. MariaDB es:</p>
<ul>
<li>Compatible con MySQL (mismo motor)</li>
<li>Open source y gratuito</li>
<li>Ideal para servidores locales</li>
<li>Soporta relaciones complejas y transacciones</li>
<li>Compatible con SQLAlchemy ORM de Python</li>
</ul>

<h3>4.2 Entidades Principales</h3>

<ol>
<li><strong>Usuarios</strong>
  <ul>
    <li>Roles: Administrador, Recepción, Técnico, Auxiliar, Jefe de Taller</li>
    <li>Autenticación y permisos</li>
  </ul>
</li>

<li><strong>Clientes</strong>
  <ul>
    <li>Datos de contacto</li>
    <li>Historial de trabajos</li>
  </ul>
</li>

<li><strong>OrdenesTrabajo (OT)</strong>
  <ul>
    <li>Folio único</li>
    <li>Estatus, prioridad, fechas</li>
    <li>Precio estimado, anticipo</li>
    <li>Fotos, notas, observaciones</li>
  </ul>
</li>

<li><strong>Tareas y Subtareas</strong>
  <ul>
    <li>Relación con OT</li>
    <li>Estatus individual</li>
  </ul>
</li>

<li><strong>OTIs (Operaciones Técnicas Internas)</strong>
  <ul>
    <li>Operaciones relacionadas</li>
    <li>Usuario que las agregó</li>
  </ul>
</li>

<li><strong>Materiales</strong>
  <ul>
    <li>Materiales utilizados por trabajo</li>
    <li>Costos</li>
  </ul>
</li>

<li><strong>Pagos</strong>
  <ul>
    <li>Tipos de pago</li>
    <li>Anticipos</li>
    <li>Pagos completos</li>
  </ul>
</li>

<li><strong>Gastos</strong>
  <ul>
    <li>Gastos por trabajo</li>
    <li>Gastos generales</li>
  </ul>
</li>

<li><strong>Categorías y Subcategorías</strong>
  <ul>
    <li>Tipos de trabajo personalizables</li>
  </ul>
</li>

<li><strong>Notificaciones</strong>
  <ul>
    <li>Push, email, WhatsApp</li>
  </ul>
</li>

<li><strong>Reportes</strong>
  <ul>
    <li>Historial de reportes generados</li>
  </ul>
</li>
</ol>

<hr />

<h2>5. FUNCIONALIDADES DETALLADAS POR MÓDULO</h2>

<h3>5.1 Módulo de Recepción</h3>

<h4>Pantalla Principal</h4>
<ul>
<li>Formulario de recepción</li>
<li>Cámara para foto de pieza</li>
<li>Selector de cliente (autocompletado)</li>
<li>Checkbox "Cliente nuevo" → formulario</li>
<li>Selector de tipo de permiso</li>
<li>Precio sugerido (opcional)</li>
<li>Status: Recibido / Diagnóstico</li>
<li>Etiquetas: Urgente / No prioridad</li>
<li>Fecha promesa (calendario)</li>
<li>Categoría y subcategoría</li>
<li>Descripción y observaciones</li>
<li>Asignación a técnico</li>
<li>Botón "Agregar subtarea"</li>
</ul>

<h4>Validaciones</h4>
<ul>
<li>Si precio estimado ≥ $1,500 → solicitar anticipo 50%</li>
<li>Generación automática de folio OT</li>
</ul>

<h4>Permisos</h4>
<ul>
<li>Crear, editar, solicitar eliminación (requiere aprobación)</li>
</ul>

<h3>5.2 Módulo de Impresión</h3>

<h4>Ticket Incluye</h4>
<ul>
<li>Fecha y hora de recepción</li>
<li>Nombre de quien recibió</li>
<li>Folio OT</li>
<li>Datos del cliente</li>
<li>Descripción del trabajo</li>
<li>Precio estimado</li>
<li>Anticipo (si aplica)</li>
<li>Logo del negocio</li>
<li>QR para seguimiento</li>
</ul>

<h3>5.3 Panel de Técnicos</h3>

<h4>Vista Principal</h4>
<ul>
<li>Lista de OT asignadas</li>
<li>Filtros: prioridad, fecha compromiso, estatus</li>
<li>Indicadores visuales de urgencia</li>
</ul>

<h4>Acciones por OT</h4>
<ul>
<li>Cambiar estatus:
  <ul>
    <li>En espera</li>
    <li>Proceso</li>
    <li>Pausa (interna) → motivo requerido</li>
    <li>Revisión</li>
    <li>Terminado (en espera de revisión)</li>
  </ul>
</li>
<li>Agregar subtareas</li>
<li>Agregar OTIs con operaciones</li>
<li>Registrar materiales utilizados</li>
<li>Agregar notas</li>
</ul>

<h4>Notificaciones</h4>
<ul>
<li>Nueva OT asignada</li>
<li>Recordatorios de fechas compromiso</li>
</ul>

<h3>5.4 Recepción Post-Trabajo</h3>

<h4>Flujo</h4>
<ol>
<li>Técnico marca "Terminado"</li>
<li>Recepción recibe notificación</li>
<li>Revisión del trabajo</li>
<li>Foto de salida</li>
<li>Crear borrador con precios por tarea</li>
<li>Enviar borrador a Admin1</li>
<li>Admin1 aprueba o solicita cambios</li>
<li>Aprobación → notificación automática al cliente (WhatsApp/Email)</li>
<li>Gestión de garantía si aplica</li>
</ol>

<h4>Pantalla de Borrador</h4>
<ul>
<li>Lista de OTIs y operaciones</li>
<li>Campo de precio por tarea</li>
<li>Campo de notas</li>
<li>Botón "Enviar a aprobación"</li>
</ul>

<h3>5.5 Módulo de Caja</h3>

<h4>Funcionalidades</h4>
<ul>
<li>Registro de pagos por OT</li>
<li>Tipos: Efectivo, Tarjeta, Transferencia, Cheque</li>
<li>Fecha, hora, usuario que registra</li>
<li>Corte de caja diario</li>
<li>Registro de gastos</li>
<li>Relación con anticipos</li>
</ul>

<h3>5.6 Módulo Auxiliar</h3>

<h4>Panel</h4>
<ul>
<li>Dashboard de ingresos/egresos</li>
<li>Gráficos de flujo de caja</li>
<li>Cuentas por cobrar</li>
<li>Cuentas por pagar</li>
<li>Filtros por fecha</li>
</ul>

<h3>5.7 Módulo de Reportes</h3>

<h4>Reportes Disponibles</h4>
<ol>
<li>Trabajos entrantes/salientes</li>
<li>Pagados vs entregados</li>
<li>Movimientos de caja</li>
<li>Utilidad por trabajo</li>
<li>Gastos por trabajo</li>
<li>Reporte por cliente</li>
<li>Venta por fecha</li>
<li>Venta por cliente</li>
</ol>

<h4>Filtros</h4>
<ul>
<li>Cliente</li>
<li>Técnico</li>
<li>Tipo de urgencia</li>
<li>Categoría</li>
<li>Rango de fechas</li>
</ul>

<h4>Cálculo de Comisiones</h4>
<ul>
<li>Base: utilidad después de gastos</li>
<li>Reglas configurables por administrador</li>
<li>Usuario específico puede modificar gastos</li>
</ul>

<h3>5.8 Módulo de Administración</h3>

<h4>Gestión de Usuarios</h4>
<ul>
<li>Crear, editar, desactivar usuarios</li>
<li>Asignación de roles</li>
<li>Hasta 3 responsables</li>
</ul>

<h4>Configuración</h4>
<ul>
<li>Datos del negocio (nombre, logo, RFC)</li>
<li>Números de teléfono</li>
<li>Configuración de notificaciones</li>
<li>Parámetros de comisiones</li>
</ul>

<h4>Monitoreo</h4>
<ul>
<li>Dashboard de operaciones</li>
<li>Métricas en tiempo real</li>
<li>Alertas</li>
</ul>

<hr />

<h2>6. FLUJO DE TRABAJO COMPLETO</h2>

<pre><code>1. RECEPCIÓN
   ↓
   Cliente llega con trabajo
   ↓
   Recepción captura datos en tablet/teléfono
   ↓
   Si precio ≥ $1,500 → Solicita anticipo 50%
   ↓
   Genera folio OT
   ↓
   Asigna a técnico
   ↓
   Imprime ticket
   ↓
   Notifica a técnico

2. TÉCNICO
   ↓
   Recibe notificación
   ↓
   Revisa OT asignada
   ↓
   Cambia estatus a "Proceso"
   ↓
   Trabaja en el proyecto
   ↓
   Registra materiales utilizados
   ↓
   Agrega OTIs y operaciones
   ↓
   Marca como "Terminado"
   ↓
   Notifica a recepción

3. RECEPCIÓN POST-TRABAJO
   ↓
   Revisa trabajo terminado
   ↓
   Toma foto de salida
   ↓
   Crea borrador con precios
   ↓
   Envía a Admin1

4. ADMINISTRACIÓN
   ↓
   Admin1 revisa borrador
   ↓
   Aprueba o solicita cambios
   ↓
   Si aprueba → Notifica al cliente

5. CLIENTE
   ↓
   Recibe notificación (WhatsApp/Email)
   ↓
   Ve detalles y precio final
   ↓
   Acude a pagar

6. CAJA
   ↓
   Registra pago
   ↓
   Entrega trabajo
   ↓
   Marca OT como "Finalizada"
</code></pre>

<hr />

<h2>7. ARQUITECTURA DE CAPAS</h2>

<pre><code>┌─────────────────────────────────────────────────────────────┐
│                    CAPA DE PRESENTACIÓN                       │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────────────────────────────────────────────────┐   │
│  │         Aplicación Web React (Responsive)             │   │
│  │                                                       │   │
│  │  ┌──────────────┐    ┌──────────────┐               │   │
│  │  │  Recepción   │    │  Técnicos    │               │   │
│  │  │  (Tablet/    │    │  (Tablet/    │               │   │
│  │  │   Móvil)     │    │   Móvil)     │               │   │
│  │  └──────────────┘    └──────────────┘               │   │
│  │                                                       │   │
│  │  ┌──────────────┐    ┌──────────────┐               │   │
│  │  │  Admin/Caja  │    │  Reportes    │               │   │
│  │  │  (Escritorio)│    │  (Escritorio)│               │   │
│  │  └──────────────┘    └──────────────┘               │   │
│  │                                                       │   │
│  │  • React.js + Router                                │   │
│  │  • Material-UI / Ant Design                         │   │
│  │  • React-PDF para tickets                          │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                               │
└─────────────────────────────┬───────────────────────────────┘
                              │
┌─────────────────────────────▼─────────────────────────────┐
│                    CAPA DE API                             │
│                  Python + FastAPI                          │
├───────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │   Auth   │  │   OT     │  │  Pagos   │  │ Reportes │ │
│  │   API    │  │   API    │  │   API    │  │   API    │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
│                                                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │Clientes  │  │Técnicos  │  │Notific.  │  │  Files   │ │
│  │   API    │  │   API    │  │   API    │  │   API    │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
│                                                             │
│  • FastAPI Framework                                       │
│  • SQLAlchemy ORM                                          │
│  • Pydantic para validación                                │
│  • JWT Authentication                                      │
│                                                             │
└─────────────────────────────┬─────────────────────────────┘
                              │
┌─────────────────────────────▼─────────────────────────────┐
│                    CAPA DE SERVICIOS                        │
├───────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │WhatsApp  │  │  Email   │  │  Storage │  │   PDF    │ │
│  │ Service  │  │ Service  │  │  Local   │  │ Generator│ │
│  │ (API Ext)│  │  (SMTP)  │  │  Files   │  │ReportLab │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
│                                                             │
└─────────────────────────────┬─────────────────────────────┘
                              │
┌─────────────────────────────▼─────────────────────────────┐
│                    CAPA DE DATOS                          │
├───────────────────────────────────────────────────────────┤
│                                                             │
│         MariaDB Database (Servidor Local)                 │
│         Base de Datos Relacional SQL                       │
│  • Usuarios  • Clientes  • OT  • Pagos  • Materiales      │
│  • OTIs      • Gastos    • Reportes  • Notificaciones     │
│                                                             │
│  • Alembic para migraciones                               │
│  • SQLAlchemy ORM (compatible con MariaDB)                │
│  • Backup local configurado                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
</code></pre>

<hr />

<h2>8. SEGURIDAD Y HARDENING</h2>

<h3>8.1 Configuración del Servidor</h3>
<ul>
<li>Actualización de sistema operativo y paquetes</li>
<li>Configuración de firewall (UFW o iptables)
  <ul>
    <li>Puerto 80 (HTTP) - redirige a HTTPS</li>
    <li>Puerto 443 (HTTPS)</li>
    <li>Puerto 3306 (MariaDB) - solo acceso local</li>
    <li>Puerto 8000 (FastAPI) - solo acceso local o VPN</li>
  </ul>
</li>
<li>Deshabilitación de servicios innecesarios</li>
<li>Configuración de límites de recursos (ulimit)</li>
</ul>

<h3>8.2 Seguridad de Base de Datos</h3>
<ul>
<li>Usuario de aplicación con permisos mínimos necesarios</li>
<li>Contraseñas seguras y rotación de contraseñas</li>
<li>Acceso remoto deshabilitado (solo localhost)</li>
<li>Backup automático diario configurado</li>
<li>Encriptación de datos sensibles en BD</li>
<li>Logs de auditoría habilitados</li>
</ul>

<h3>8.3 Seguridad de la Aplicación</h3>
<ul>
<li>SSL/HTTPS con Let's Encrypt</li>
<li>Headers de seguridad HTTP (HSTS, CSP, X-Frame-Options)</li>
<li>Rate limiting en API</li>
<li>Validación y sanitización de entrada</li>
<li>Protección CSRF</li>
<li>Encriptación de datos sensibles en tránsito</li>
</ul>

<h3>8.4 Seguridad de Archivos</h3>
<ul>
<li>Permisos de archivos restringidos (uploads/)</li>
<li>Validación de tipos de archivo</li>
<li>Escaneo de malware (opcional)</li>
<li>Límite de tamaño de archivos</li>
</ul>

<h3>8.5 Monitoreo y Logs</h3>
<ul>
<li>Logs de acceso y errores configurados</li>
<li>Monitoreo de recursos del servidor (CPU, RAM, disco)</li>
<li>Alertas de seguridad configuradas</li>
<li>Logs de auditoría de acciones críticas</li>
</ul>

<h3>8.6 Backup y Recuperación</h3>
<ul>
<li>Backup automático diario de base de datos</li>
<li>Backup de archivos (uploads/)</li>
<li>Script de restauración probado</li>
<li>Plan de recuperación ante desastres documentado</li>
</ul>

<hr />

<h2>9. ROLES Y PERMISOS</h2>

<table>
<thead>
<tr>
<th>Rol</th>
<th>Permisos</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Administrador</strong></td>
<td>Acceso total al sistema, configuración, usuarios, reportes ejecutivos</td>
</tr>
<tr>
<td><strong>Recepción</strong></td>
<td>Crear/editar OT, gestión de clientes, impresión de tickets, recepción post-trabajo</td>
</tr>
<tr>
<td><strong>Técnico</strong></td>
<td>Ver OT asignadas, cambiar estatus, agregar materiales, OTIs, subtareas</td>
</tr>
<tr>
<td><strong>Caja</strong></td>
<td>Registro de pagos, cortes de caja, gestión de gastos</td>
</tr>
<tr>
<td><strong>Auxiliar</strong></td>
<td>Dashboard financiero, cuentas por cobrar/pagar, reportes básicos</td>
</tr>
<tr>
<td><strong>Jefe de Taller</strong></td>
<td>Supervisión de técnicos, reasignación de trabajos, aprobaciones</td>
</tr>
</tbody>
</table>

<hr />

<h2>10. INTEGRACIONES EXTERNAS</h2>

<h3>10.1 WhatsApp Business API</h3>
<ul>
<li>Integración con API externa (Twilio, WhatsApp Business API, etc.)</li>
<li>Envío automático de notificaciones a clientes</li>
<li>Plantillas de mensajes configurables</li>
<li>Manejo de errores y reintentos</li>
<li>Log de mensajes enviados</li>
</ul>

<h3>10.2 Email (SMTP)</h3>
<ul>
<li>Servidor SMTP local o servicio externo (SendGrid, etc.)</li>
<li>Notificaciones por email a clientes</li>
<li>Plantillas HTML personalizables</li>
<li>Adjuntar tickets y reportes en PDF</li>
</ul>

<h3>10.3 Impresoras Térmicas</h3>
<ul>
<li>Integración con impresoras térmicas locales</li>
<li>Generación de tickets en formato compatible</li>
<li>Configuración de múltiples impresoras</li>
</ul>

<hr />

<h2>11. MÉTRICAS Y KPIs</h2>

<h3>Métricas de Sistema</h3>
<ul>
<li>Tiempo de respuesta API < 500ms</li>
<li>Disponibilidad > 99%</li>
<li>Capacidad: 100+ OT/día</li>
<li>Usuarios concurrentes: 10+</li>
</ul>

<h3>Métricas de Negocio</h3>
<ul>
<li>Trabajos entrantes vs salientes</li>
<li>Tiempo promedio de resolución</li>
<li>Tasa de cumplimiento de fechas promesa</li>
<li>Utilidad por trabajo</li>
<li>Comisiones por técnico</li>
<li>Tasa de éxito de notificaciones</li>
</ul>

<hr />

<h2>12. TESTING Y CALIDAD</h2>

<h3>12.1 Pruebas Funcionales</h3>
<ul>
<li>Todos los módulos funcionan correctamente</li>
<li>Flujos completos de usuario validados</li>
<li>Validación de reglas de negocio</li>
<li>Generación de reportes correcta</li>
<li>Notificaciones se envían correctamente</li>
</ul>

<h3>12.2 Pruebas de Integración</h3>
<ul>
<li>API externa de WhatsApp funciona correctamente</li>
<li>Integración con base de datos MariaDB</li>
<li>Subida y almacenamiento de imágenes</li>
<li>Generación de PDFs (tickets y reportes)</li>
<li>Autenticación y permisos por rol</li>
</ul>

<h3>12.3 Pruebas de Carga</h3>
<ul>
<li>Sistema soporta múltiples usuarios simultáneos</li>
<li>Base de datos responde correctamente bajo carga</li>
<li>API responde en tiempos aceptables</li>
<li>Frontend se mantiene responsive</li>
</ul>

<h3>12.4 Pruebas de Seguridad</h3>
<ul>
<li>Autenticación JWT funciona correctamente</li>
<li>Permisos por rol se respetan</li>
<li>Datos sensibles están protegidos</li>
<li>Validación de entrada de datos</li>
<li>Protección contra inyección SQL</li>
</ul>

<h3>12.5 Pruebas de Usabilidad</h3>
<ul>
<li>Interfaz es intuitiva en tablets y teléfonos</li>
<li>Formularios son fáciles de completar</li>
<li>Navegación es clara y lógica</li>
<li>Mensajes de error son comprensibles</li>
</ul>

<hr />

<h2>13. DOCUMENTACIÓN ENTREGABLE</h2>

<h3>Documentación Técnica</h3>
<ul>
<li>Manual de instalación y configuración</li>
<li>Documentación de API (endpoints, parámetros, respuestas)</li>
<li>Diagrama de base de datos (ERD)</li>
<li>Arquitectura del sistema</li>
<li>Guía de despliegue</li>
<li>Procedimientos de backup y restauración</li>
</ul>

<h3>Documentación de Usuario</h3>
<ul>
<li>Manual de usuario por módulo</li>
<li>Guías rápidas por rol</li>
<li>Videos tutoriales</li>
<li>FAQ (Preguntas frecuentes)</li>
<li>Solución de problemas comunes</li>
</ul>

<hr />

<p><strong>Documento actualizado el:</strong> 22/01/2026<br />
<strong>Versión:</strong> 1.0 - Estructura Técnica<br />
<strong>Tipo:</strong> Documentación Técnica del Proyecto</p>

</body>
</html>
